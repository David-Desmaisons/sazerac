{"version":3,"file":null,"sources":["src/reducers/Actions.js","src/messages.js","src/reducers/cases.js","src/reducers/describeMessage.js","src/reducers/testFunction.js","src/reducers/state.js","src/context.js","src/describer.js","src/main.js"],"sourcesContent":["let Actions = {}\n\nconst actionsArray = [\n  'INIT',\n  'ADD_CASE',\n  'ADD_EXPECTED_VALUE'\n]\n\nactionsArray.forEach((action) => {\n  Actions[action] = action\n})\n\nconst newAction = (type, params) => {\n  return { type, ...params }\n}\n\nexport { Actions, newAction }\nexport default Actions\n","import { isString } from 'lodash'\n\nconst defaultDescribeCase = (args = []) => {\n  if (args.length > 0) {\n    const formattedArgs = args.map((arg) => {\n      return formatString(arg)\n    })\n    return 'when given ' + formattedArgs.join(' and ')\n  } else {\n    return 'when called'\n  }\n}\n\nconst defaultShouldMessage = (expectedValue) => {\n  return 'should return ' + formatString(expectedValue)\n}\n\nconst formatString = (str) => {\n  if (isString(str)) return \"'\" + str + \"'\"\n  return str\n}\n\nexport default { defaultDescribeCase, defaultShouldMessage }\nexport { defaultDescribeCase, defaultShouldMessage }\n","import { concat, toArray } from 'lodash'\nimport Actions from './Actions'\nimport { defaultDescribeCase } from '../messages'\n\nexport default (state = [], action) => {\n\n  switch(action.type) {\n    \n    case Actions.ADD_CASE:\n      const inputParams = toArray(action.args)\n      return concat(state, {\n        inputParams: inputParams,\n        describeMessage: defaultDescribeCase(inputParams)\n      })\n\n    case Actions.ADD_EXPECTED_VALUE:\n      return state\n\n    default:\n      return state\n\n  }\n\n}","import Actions from './Actions'\n\nexport default (state, action) => {\n  \n  switch(action.type) {\n    case Actions.INIT:\n      return action.describeMessage || action.fn.name + '()'\n    default:\n      return state\n  }\n\n}\n","import Actions from './Actions'\n\nexport default (state, action) => {\n\n  switch(action.type) {\n    case Actions.INIT:\n      return action.fn\n    default:\n      return state\n  }\n\n}","import Actions from './Actions'\nimport cases from './cases'\nimport describeMessage from './describeMessage'\nimport testFunction from './testFunction'\n\nexport default (state = {}, action) => {\n  return {\n    testFunction: testFunction(state.testFunction, action),\n    cases: cases(state.cases, action),\n    describeMessage: describeMessage(state.describeMessage, action)\n  }\n}","'use strict'\n\nimport { map } from 'lodash'\nimport { Actions, newAction } from './reducers/Actions'\nimport { defaultDescribeCase, defaultShouldMessage } from './messages'\nimport state from './reducers/state'\n\nconst init = (fn, describeMessage) => {\n  return state({}, newAction(Actions.INIT, { fn, describeMessage }));\n}\n\nconst addCase = (ctx, args) => {\n  return {\n    context: state(ctx, newAction(Actions.ADD_CASE, { args })),\n    caseIndex: nextCaseIndex(ctx)\n  }\n}\n\nconst addExpectedValue = (ctx, caseIndex, expectedValue) => {\n  return {\n    ...ctx,\n    cases: updateCase(ctx.cases, caseIndex, (tCase) => {\n      return {\n        ...tCase,\n        expectedValue,\n        shouldMessage: defaultShouldMessage(expectedValue)\n      }\n    })\n  }\n}\n\nconst nextCaseIndex = (ctx) => {\n  return ctx.cases.length;\n}\n\nconst updateCase = (cases, caseIndex, fn) => {\n  return map(cases, (tCase, i) => {\n    if (caseIndex === i) return fn(tCase)\n    return tCase\n  })\n}\n\nexport default {\n  init,\n  addCase,\n  addExpectedValue\n}\n","'use strict'\n\nimport { forEach, map } from 'lodash'\nimport { assert } from 'chai'\n\nconst describer = (context, frameworkFunctions) => {\n  executeDescribers(buildDescriberDefinition(context, frameworkFunctions))\n}\n\nconst executeDescribers = (def) => {\n  const { func, message, calls, test } = def\n  func(message, () => {\n    test ? testExecuter.apply(null, test) : forEach(calls, (call) => { executeDescribers(call) })\n  })\n}\n\nconst testExecuter = (testFunction, inputParams, expectedValue) => {\n  const actualVal = testFunction.apply(null, inputParams)\n  assert.deepEqual(actualVal, expectedValue)\n}\n\nconst buildDescriberDefinition = (context, frameworkFunctions) => {\n  const { describeFn } = frameworkFunctions\n  const { testFunction, cases, describeMessage } = context\n  return {\n    func: describeFn,\n    message: describeMessage,\n    calls: map(cases, (tCase) => {\n      return getCaseDescriberDef(tCase, frameworkFunctions, testFunction)\n    })\n  }\n}\n\nconst getCaseDescriberDef = (tCase, frameworkFunctions, testFunction) => {\n  const { describeFn, itFn } = frameworkFunctions\n  return {\n    func: describeFn,\n    message: tCase.describeMessage,\n    calls: [getCaseShouldDef(tCase, itFn, testFunction)]\n  }\n}\n\nconst getCaseShouldDef = (tCase, itFn, testFunction) => {\n  const { shouldMessage, inputParams, expectedValue } = tCase\n  return {\n    func: itFn,\n    message: shouldMessage,\n    test: [testFunction, inputParams, expectedValue]\n  }\n}\n\nexport default describer\nexport { describer, buildDescriberDefinition, testExecuter }\n","'use strict'\n\nimport context from './context'\nimport describer from './describer'\n\nconst frameworkFns = {\n  describeFn: describe,\n  itFn: it\n}\n\nlet _ctx;\n\nconst test = (testFn, definerFn) => {\n  // TODO: throw if they're not functions\n  _ctx = context.init(testFn)\n  definerFn()\n  describer(_ctx, frameworkFns)\n}\n\nconst given = (...args) => {\n  const { caseIndex, context: ctx } = context.addCase(_ctx, args)\n  _ctx = ctx\n  return newTestCase(caseIndex)\n}\n\nconst newTestCase = (caseIndex) => {\n  return {\n    ___caseIndex: caseIndex,\n    expect: getExpectFn(caseIndex)\n  }\n}\n\nconst getExpectFn = (caseIndex) => {\n  return (expectedValue) => {\n    _ctx = context.addExpectedValue(_ctx, caseIndex, expectedValue)\n    return newTestCase(caseIndex)\n  }\n}\n\nexport { test, given }\nexport default { test, given }\n"],"names":["Actions","actionsArray","_get__","forEach","action","newAction","type","params","defaultDescribeCase","args","length","formattedArgs","map","arg","join","defaultShouldMessage","expectedValue","formatString","str","state","ADD_CASE","inputParams","ADD_EXPECTED_VALUE","INIT","describeMessage","fn","name","testFunction","cases","init","addCase","ctx","addExpectedValue","caseIndex","tCase","nextCaseIndex","updateCase","i","describer","context","frameworkFunctions","executeDescribers","def","func","message","calls","test","apply","call","testExecuter","actualVal","deepEqual","buildDescriberDefinition","describeFn","getCaseDescriberDef","itFn","getCaseShouldDef","shouldMessage","frameworkFns","describe","it","_ctx","testFn","definerFn","given","newTestCase","getExpectFn"],"mappings":"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"}