{"version":3,"file":null,"sources":["src/context.js","src/messages.js","src/reducers/cases.js","src/reducers/describeMessage.js","src/reducers/testFunction.js","src/reducers/state.js","src/reducers/actions.js","src/describer.js","src/main.js"],"sourcesContent":["const lastCaseIndex = (ctx) => {\n  if (ctx && ctx.cases && ctx.cases.length > 0) {\n    return ctx.cases.length - 1;\n  }\n}\n\nexport { lastCaseIndex }\nexport default { lastCaseIndex }\n","import { isString } from 'lodash'\n\nconst defaultDescribeCase = (args = []) => {\n  if (args.length > 0) {\n    const formattedArgs = args.map((arg) => {\n      return formatString(arg)\n    })\n    return 'when given ' + formattedArgs.join(' and ')\n  } else {\n    return 'when called'\n  }\n}\n\nconst defaultShouldMessage = (expectedValue) => {\n  return 'should return ' + formatString(expectedValue)\n}\n\nconst formatString = (str) => {\n  if (isString(str)) return \"'\" + str + \"'\"\n  return str\n}\n\nexport default { defaultDescribeCase, defaultShouldMessage }\nexport { defaultDescribeCase, defaultShouldMessage }\n","import { concat, map, toArray } from 'lodash'\nimport actions from './actions'\nimport { defaultDescribeCase, defaultShouldMessage } from '../messages'\n\nconst updateCase = (cases, caseIndex, fn) => {\n  return map(cases, (tCase, i) => {\n    if (caseIndex === i) {\n      return fn(tCase)\n    }\n    return tCase\n  })\n}\n\nexport default (state = [], action) => {\n\n  switch(action.type) {\n    \n    case actions.ADD_CASE:\n      const inputParams = toArray(action.args)\n      return concat(state, {\n        inputParams: inputParams,\n        describeMessage: defaultDescribeCase(inputParams)\n      })\n\n    case actions.ADD_EXPECTED_VALUE:\n      return updateCase(state, action.caseIndex, (tCase) => {\n        return {\n          ...tCase,\n          expectedValue: action.expectedValue,\n          shouldMessage: defaultShouldMessage(action.expectedValue)\n        }\n      })\n\n    case actions.SET_CASE_DESCRIBE_MESSAGE:\n      return updateCase(state, action.caseIndex, (tCase) => {\n        return {\n          ...tCase,\n          describeMessage: action.message\n        }\n      })\n\n    default:\n      return state\n\n  }\n\n}","import actions from './actions'\n\nexport default (state, action) => {\n  \n  switch(action.type) {\n    case actions.INIT:\n      return action.describeMessage || action.testFn.name + '()'\n    default:\n      return state\n  }\n\n}\n","import actions from './actions'\n\nexport default (state, action) => {\n\n  switch(action.type) {\n    case actions.INIT:\n      return action.testFn\n    default:\n      return state\n  }\n\n}","import actions from './actions'\nimport cases from './cases'\nimport describeMessage from './describeMessage'\nimport testFunction from './testFunction'\n\nexport default (state = {}, action) => {\n  return {\n    testFunction: testFunction(state.testFunction, action),\n    cases: cases(state.cases, action),\n    describeMessage: describeMessage(state.describeMessage, action)\n  }\n}","import { slice } from 'lodash'\nimport state from './state'\n\nlet actions = {}\n\nconst actionsArray = [\n  'INIT',\n  'ADD_CASE',\n  'ADD_EXPECTED_VALUE',\n  'SET_CASE_DESCRIBE_MESSAGE'\n]\n\nactionsArray.forEach((action) => {\n  actions[action] = action\n})\n\nconst doAction = (type, context, params) => {\n  return state(context, { type, ...params })\n}\n\nexport { actions, doAction }\nexport default actions\n","import { forEach, map } from 'lodash'\nimport { assert } from 'chai'\n\nconst describer = (context, frameworkFunctions) => {\n  executeDescribers(buildDescriberDefinition(context, frameworkFunctions))\n}\n\nconst executeDescribers = (def) => {\n  const { func, message, calls, test } = def\n  func(message, () => {\n    test ? testExecuter.apply(null, test) : forEach(calls, (call) => { executeDescribers(call) })\n  })\n}\n\nconst testExecuter = (testFunction, inputParams, expectedValue) => {\n  const actualVal = testFunction.apply(null, inputParams)\n  assert.deepEqual(actualVal, expectedValue)\n}\n\nconst buildDescriberDefinition = (context, frameworkFunctions) => {\n  const { describeFn } = frameworkFunctions\n  const { testFunction, cases, describeMessage } = context\n  return {\n    func: describeFn,\n    message: describeMessage,\n    calls: map(cases, (tCase) => {\n      return getCaseDescriberDef(tCase, frameworkFunctions, testFunction)\n    })\n  }\n}\n\nconst getCaseDescriberDef = (tCase, frameworkFunctions, testFunction) => {\n  const { describeFn, itFn } = frameworkFunctions\n  return {\n    func: describeFn,\n    message: tCase.describeMessage,\n    calls: [getCaseShouldDef(tCase, itFn, testFunction)]\n  }\n}\n\nconst getCaseShouldDef = (tCase, itFn, testFunction) => {\n  const { shouldMessage, inputParams, expectedValue } = tCase\n  return {\n    func: itFn,\n    message: shouldMessage,\n    test: [testFunction, inputParams, expectedValue]\n  }\n}\n\nexport default describer\nexport { describer, buildDescriberDefinition, testExecuter }\n","import { lastCaseIndex } from './context'\nimport { actions, doAction } from './reducers/actions'\nimport describer from './describer'\n\nconst frameworkFns = {\n  describeFn: describe,\n  itFn: it\n}\n\nlet _ctx;\n\nconst test = (testFn, definerFn) => {\n  // TODO: throw if they're not functions\n  _ctx = doAction(actions.INIT, undefined, { testFn })\n  definerFn()\n  describer(_ctx, frameworkFns)\n}\n\nconst given = (...args) => {\n  _ctx = doAction(actions.ADD_CASE, _ctx, { args })\n  const caseIndex = lastCaseIndex(_ctx)\n  return newTestCase(caseIndex)\n}\n\nconst newTestCase = (caseIndex) => {\n  return {\n    ___caseIndex: caseIndex,\n    expect: getExpectFn(caseIndex),\n    describe: getDescribeFn(caseIndex)\n  }\n}\n\nconst getExpectFn = (caseIndex) => {\n  return (expectedValue) => {\n    _ctx = doAction(actions.ADD_EXPECTED_VALUE, _ctx, { caseIndex, expectedValue })\n    return newTestCase(caseIndex)\n  }\n}\n\nconst getDescribeFn = (caseIndex) => {\n  return (message) => {\n    _ctx = doAction(actions.SET_CASE_DESCRIBE_MESSAGE, _ctx, { caseIndex, message })\n    return newTestCase(caseIndex)\n  }\n}\n\nexport { test, given }\nexport default { test, given }\n"],"names":["lastCaseIndex","ctx","cases","length","defaultDescribeCase","args","formattedArgs","map","arg","_get__","join","defaultShouldMessage","expectedValue","formatString","str","updateCase","caseIndex","fn","tCase","i","state","action","type","ADD_CASE","inputParams","ADD_EXPECTED_VALUE","SET_CASE_DESCRIBE_MESSAGE","message","INIT","describeMessage","testFn","name","testFunction","actions","actionsArray","forEach","doAction","context","params","describer","frameworkFunctions","executeDescribers","def","func","calls","test","apply","call","testExecuter","actualVal","deepEqual","buildDescriberDefinition","describeFn","getCaseDescriberDef","itFn","getCaseShouldDef","shouldMessage","frameworkFns","describe","it","_ctx","definerFn","undefined","given","newTestCase","getExpectFn","getDescribeFn"],"mappings":"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"}